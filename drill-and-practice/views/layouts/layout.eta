<!doctype html>
<html lang="en">
    <head> 
      <link rel="stylesheet" href="/static/css/styles.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
      <link href="https://fonts.googleapis.com/css?family=Chewy" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
      <script src="/static/code.js" defer></script>
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta charset="UTF-8"/>
    </head>

    <body>
    <script>
      const sessionStatusMonitor = async () => {
        const sessionStatus = await fetch("/api/logout");
        const sessionStatusJSON = await sessionStatus.json();
        if(sessionStatusJSON.user !== "null"){//only logged in users need to be checked
          const sessionCheckInterval = 15 * 60 * 1000 //check if user idle status every 15 minutes
          
          const interval = setInterval(async () => {
            const sessionStatus = await fetch("/api/logout");
            const sessionStatusJSON = await sessionStatus.json();
            if(sessionStatusJSON.expired){//log user out if idle for too long
                window.location.href = "/auth/logout";
                clearInterval(interval);
                console.log("interval check cleared");
              }
            },sessionCheckInterval);
          }
      };
      sessionStatusMonitor();
    </script>
    <%~ includeFile("../partials/navbarPartial.eta", {user: it.user}) %>
    <div class="d-flex align-items-center justify-content-center min-vh-100">
            <%~ it.body %>
    </div>

  </body>
</html>